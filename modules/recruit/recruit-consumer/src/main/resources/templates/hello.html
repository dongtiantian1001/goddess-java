<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <!--<script src="https://cdn.bootcss.com/jquery/3.2.1/core.js"></script>-->
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"/>

    <!--flat ui-->
    <!--<link href="https://cdn.bootcss.com/flat-ui/2.3.0/css/flat-ui.css" rel="stylesheet">-->
    <!--<link href="https://cdn.bootcss.com/flat-ui/2.3.0/css/flat-ui.min.css" rel="stylesheet">-->
    <!--<link href="https://cdn.bootcss.com/flat-ui/2.3.0/css/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">-->
    <!--<script src="https://cdn.bootcss.com/flat-ui/2.3.0/js/flat-ui.min.js"></script>-->
    <!--<script src="https://cdn.bootcss.com/flat-ui/2.3.0/js/vendor/html5shiv.js"></script>-->
    <!--<script src="https://cdn.bootcss.com/flat-ui/2.3.0/js/vendor/jquery.min.js"></script>-->
    <!--<script src="https://cdn.bootcss.com/flat-ui/2.3.0/js/vendor/respond.min.js"></script>-->

    <link href="https://cdn.bootcss.com/bootstrap-select/2.0.0-beta1/css/bootstrap-select.min.css" rel="stylesheet" />
    <script src="https://cdn.bootcss.com/bootstrap-select/2.0.0-beta1/js/bootstrap-select.min.js"></script>
    <!--<link href="../static/bootstrap-select.min.css"/>-->
    <!--<script src="../static/bootstrap-select.min.js"></script>-->

    <!-- Latest compiled and minified CSS -->
    <!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css"/>-->

    <!--&lt;!&ndash; Latest compiled and minified JavaScript &ndash;&gt;-->
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script>-->

    <!--&lt;!&ndash; (Optional) Latest compiled and minified JavaScript translation files &ndash;&gt;-->
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/i18n/defaults-*.min.js"></script>-->

    <meta charset="UTF-8"/>
    <title>Title</title>
    <script src="../static/i18n/defaults-zh_TW.js"></script>
</head>
<body>
    <div class="container" style="box-shadow: 0px 10px 50px #BDC3C7;margin-top: 3%;border-radius: 5px">
        <div class="col-xs-12">
            <div class="col-xs-12 form-group" style="">
                <h1 style="">KINGDOM RUSH</h1>
                <p class="col-xs-3 col-xs-offset-3">what the fuck</p>
                <p class="col-xs-9 col-xs-offset-3">It's true that we don't know what we've got <kbd>until</kbd> we lose it, but it's also true that we don't know what we've been losing until it arrives <kbd>SB</kbd>. </p>
            </div>

            <div class="col-xs-3 form-group">
                <label for="first">first test</label>
                <input class="form-control" type="text" placeholder="Head of the first test" id="first"/>
                <div class="form-group">
                    <div class="">
                        <div class="checkbox">
                            <label>
                                <input type="checkbox" onclick="show()"/> open gambling
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xs-10"></div>
            <div class="col-xs-3 form-group">
                <label for="second">second test</label>
                <input class="form-control" type="text" placeholder="Head of the second test" id="second"/>
                <div class="form-group">
                    <div class="">
                        <div class="checkbox">
                            <label>
                                <input type="checkbox" onclick="show()"/> open gambling
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xs-12 form-group">
                <div class="col-xs-2 col-xs-push-10">
                    <button class="btn btn-primary btn-block">send</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" tabindex="-1" role="dialog" id="myModal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="col-xs-12">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    </div>

                    <div>
                        <div class="col-xs-5">
                            <h4 class="modal-title">Modal title</h4>
                        </div>
                        <div class="col-xs-2">
                            <h4 class="modal-title">vs</h4>
                        </div>
                        <div class="col-xs-4 col-xs-push-2">
                            <h4 class="modal-title">Other party</h4>
                        </div>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="container">
                        <div class="col-xs-6">
                            <div class="col-xs-12" id="one">
                                <div class="col-xs-4 form-group">
                                    <label>select</label>
                                    <select class="selectpicker">
                                        <option>Mustard</option>
                                        <option>Ketchup</option>
                                        <option>Relish</option>
                                    </select>
                                </div>
                                <div class="col-xs-4 col-xs-push-3">
                                    <label>weight</label>
                                    <div class="input-group">
                                        <input class="form-control" type="text"/>
                                        <div class="input-group-addon">%</div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xs-12" id="two">
                                <div class="col-xs-4 form-group">
                                    <label>select</label>
                                    <select class="selectpicker">
                                        <option>Mustard</option>
                                        <option>Ketchup</option>
                                        <option>Relish</option>
                                    </select>
                                </div>
                                <div class="col-xs-4 col-xs-push-3">
                                    <label>weight</label>
                                    <div class="input-group">
                                        <input class="form-control" type="text"/>
                                        <div class="input-group-addon">%</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <!--<button type="button" data-toggle="modal" data-target="#myModal">Launch modal</button>-->
    <input id="text" type="text" /><button onclick="send()">Send</button> <button onclick="closeWebSocket()">Close</button> <div id="message"> </div>
</body>

<script>
    function show() {
        $('#myModal').modal('show')
    }

    var websocket = null;
    //判断当前浏览器是否支持WebSocket
    if('WebSocket' in window){
        websocket = new WebSocket("ws://192.168.0.149:51100/websocket?admin");
    } else{
        alert('Not support websocket')
    }
    //连接发生错误的回调方法
    websocket.onerror = function(){
        setMessageInnerHTML("error");
    };
    // 连接成功建立的回调方法
    websocket.onopen = function(event){
        setMessageInnerHTML("open");
    } //接收到消息的回调方法
    websocket.onmessage = function(event){
        setMessageInnerHTML(event.data);
        alert(event.data);
    }
    //连接关闭的回调方法
    websocket.onclose = function(){
        setMessageInnerHTML("close");
    }
    //监听窗口关闭事件，当窗口关闭时，主动去关闭websocket连接，防止连接还没断开就关闭窗口，server端会抛异常。
    window.onbeforeunload = function(){
        websocket.close();
    }
    //将消息显示在网页上
    function setMessageInnerHTML(innerHTML){
        document.getElementById('message').innerHTML += innerHTML + '<br/>';
    }
    //关闭连接
    function closeWebSocket(){
        websocket.close();
    }
    //发送消息
    function send(){
        var message = document.getElementById('text').value; websocket.send(message);
    }

</script>

</html>